<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>webpack自动雪碧图生成 | Hexo</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="构建工具," />
  

  <meta name="description" content="前端项目中自动生成雪碧图节省了我们很多的时间, 原来做这些工作比较依赖compass, 但是在webpack项目中如果只为了雪碧图引入compass有点太过笨重，这里总结几个使用webpack就能生成雪碧图的方法。 Postcss Sprites后处理postcss后处理是一个很强大的处理css的工具，跟sass这些预处理工具不同，postcss做为后处理工具，需要我们用loader处理sass后">
<meta name="keywords" content="构建工具">
<meta property="og:type" content="article">
<meta property="og:title" content="webpack自动雪碧图生成">
<meta property="og:url" content="http://yoursite.com/2016/03/16/webpack_auto_sprites/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="前端项目中自动生成雪碧图节省了我们很多的时间, 原来做这些工作比较依赖compass, 但是在webpack项目中如果只为了雪碧图引入compass有点太过笨重，这里总结几个使用webpack就能生成雪碧图的方法。 Postcss Sprites后处理postcss后处理是一个很强大的处理css的工具，跟sass这些预处理工具不同，postcss做为后处理工具，需要我们用loader处理sass后">
<meta property="og:updated_time" content="2016-03-18T07:03:45.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="webpack自动雪碧图生成">
<meta name="twitter:description" content="前端项目中自动生成雪碧图节省了我们很多的时间, 原来做这些工作比较依赖compass, 但是在webpack项目中如果只为了雪碧图引入compass有点太过笨重，这里总结几个使用webpack就能生成雪碧图的方法。 Postcss Sprites后处理postcss后处理是一个很强大的处理css的工具，跟sass这些预处理工具不同，postcss做为后处理工具，需要我们用loader处理sass后">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link rel="stylesheet" href="/css/styles.css">

  

  

  

</head>

<body>
  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">盒子</span>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a 
            class="CIRCLE" 
            href="/archives/"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a 
            class="CIRCLE" 
            href="/category/"
            target="_self"
            >
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a 
            class="CIRCLE" 
            href="/tag/"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a 
            class="CIRCLE" 
            href="/link/"
            target="_self"
            >
            友链
          </a>
        </li>
      
        <li class="item-toolbox">
          <a 
            class="CIRCLE" 
            href="/about/"
            target="_self"
            >
            关于
          </a>
        </li>
      
        <li class="item-toolbox">
          <a 
            class="CIRCLE" 
            href="/atom.xml"
            target="_blank"
            >
            RSS
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Postcss-Sprites后处理"><span class="toc-text">Postcss Sprites后处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpritesmithPlugin"><span class="toc-text">SpritesmithPlugin</span></a></li></ol>
  </div>


<a class="back-top" href="#">
  <i class="icon-angle-up"></i>
</a>


<div class="content-post CENTER">
   <article id="post-webpack_auto_sprites" class="article article-type-post" itemscope itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">webpack自动雪碧图生成</h1>

    <div class="article-meta">
      <span>2016-03-16</span>

      <span> | </span>

      <span class="article-author">kyoko-df</span>

      <span> | </span>

      
  <span class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>
  </span>


    </div>
  </header>

  <div class="article-content">
    
      <p><strong>前端项目中自动生成雪碧图节省了我们很多的时间, 原来做这些工作比较依赖compass, 但是在webpack项目中如果只为了雪碧图引入compass有点太过笨重，这里总结几个使用webpack就能生成雪碧图的方法。</strong></p>
<h3 id="Postcss-Sprites后处理"><a href="#Postcss-Sprites后处理" class="headerlink" title="Postcss Sprites后处理"></a>Postcss Sprites后处理</h3><p>postcss后处理是一个很强大的处理css的工具，跟sass这些预处理工具不同，postcss做为后处理工具，需要我们用loader处理sass后再处理，在postcss里我们做很多事，比如autoprefix，preces，合并图片甚至是一些兼容调整或者px转换em都以支持，像vue-loader等这样的框架文件loader都已经内置了postcss，只要简单的配置就可以使用。</p>
<p>这里我们用autoprefixer简单介绍一下postcss的用法：</p>
<p>install: <code>npm install postcss-loader --save-dev</code></p>
<p>usage:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>: &#123;</div><div class="line">  <span class="attr">loaders</span>: [</div><div class="line">    &#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">loader</span>: <span class="string">'babel-loader'</span>&#125;,</div><div class="line">    &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,<span class="attr">loader</span>: <span class="string">'style-loader!css-loader!postcss-loader'</span>&#125;</div><div class="line">  ]</div><div class="line">&#125;,</div><div class="line"><span class="attr">postcss</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> [autoprefixer];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>同样我们可以在postcss里简单配置一个sprites</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> postcssSprites = <span class="built_in">require</span>(<span class="string">'postcss-sprites'</span>);</div><div class="line"></div><div class="line">postcss: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> [postcssSprites(</div><div class="line">    &#123;	<span class="attr">stylesheetPath</span>: <span class="string">'./src'</span>,</div><div class="line">     	<span class="attr">spritePath</span>: <span class="string">'./src/images/gen/sprite.png'</span>,</div><div class="line">     	<span class="attr">retina</span>: <span class="literal">true</span>, </div><div class="line">     	<span class="attr">padding</span>: <span class="number">3</span>, </div><div class="line">     	<span class="attr">filterBy</span>: <span class="function"><span class="keyword">function</span>(<span class="params">image</span>)</span>&#123;<span class="keyword">return</span> <span class="regexp">/\/sp\//gi</span>.test(image.url)&#125;</div><div class="line">    &#125;</div><div class="line">  )]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这个简单的例子里先要告诉了postcss我们的style文件的地址，生成雪碧图的地址，是否需要retina支持，padding可以设置图片之间的空隙，filterBy可以用来排除一些我们不需要合成雪碧图的文件。</p>
<p>我们也可以看一个复杂的例子来自[<a href="https://segmentfault.com/a/1190000004592944" target="_blank" rel="external">webpack之postcss集成</a>]</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//雪碧图相关代码</span></div><div class="line"><span class="keyword">let</span> spritesConfig = sprites(&#123;</div><div class="line">    <span class="attr">retina</span>: <span class="literal">true</span>,<span class="comment">//支持retina，可以实现合并不同比例图片</span></div><div class="line">    verbose: <span class="literal">true</span>,</div><div class="line">    <span class="attr">spritePath</span>: <span class="string">'./public/images/'</span>,<span class="comment">//雪碧图合并后存放地址</span></div><div class="line">    stylesheetPath: <span class="string">'./public'</span>,</div><div class="line">    <span class="attr">basePath</span>: <span class="string">'./'</span>,</div><div class="line">    <span class="attr">filterBy</span>: <span class="function"><span class="keyword">function</span> (<span class="params">image</span>) </span>&#123;</div><div class="line">        <span class="comment">//过滤一些不需要合并的图片，返回值是一个promise，默认有一个exist的filter</span></div><div class="line">        <span class="comment">//</span></div><div class="line">        <span class="keyword">if</span> (image.url.indexOf(<span class="string">'/images/sprites/'</span>) === <span class="number">-1</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="built_in">Promise</span>.reject();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve();</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">groupBy</span>: <span class="function"><span class="keyword">function</span> (<span class="params">image</span>) </span>&#123;</div><div class="line">        <span class="comment">//将图片分组，可以实现按照文件夹生成雪碧图</span></div><div class="line">        <span class="keyword">return</span> spritesGroupBy(image);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">hooks</span>: &#123;</div><div class="line">        <span class="attr">onUpdateRule</span>: <span class="function"><span class="keyword">function</span> (<span class="params">rule, comment, image</span>) </span>&#123;</div><div class="line">            <span class="comment">//更新生成后的规则，这里主要是改变了生成后的url访问路径</span></div><div class="line">            <span class="keyword">return</span> spritesOnUpdateRule(<span class="literal">true</span>, rule, comment, image);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">onSaveSpritesheet</span>: <span class="function"><span class="keyword">function</span>(<span class="params">opts, groups</span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> spritesOnSaveSpritesheet(<span class="literal">true</span>, opts, groups);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">let</span> groups = <span class="regexp">/\/images\/sprites\/(.*?)\/.*/gi</span>.exec(image.url);</div><div class="line">    <span class="keyword">let</span> groupName = groups ? groups[<span class="number">1</span>] : group;</div><div class="line">    image.retina = <span class="literal">true</span>;</div><div class="line">    image.ratio = <span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span> (groupName) &#123;</div><div class="line">        <span class="keyword">let</span> ratio = <span class="regexp">/@(\d+)x$/gi</span>.exec(groupName);</div><div class="line">        <span class="keyword">if</span> (ratio) &#123;</div><div class="line">            ratio = ratio[<span class="number">1</span>];</div><div class="line">            <span class="keyword">while</span> (ratio &gt; <span class="number">10</span>) &#123;</div><div class="line">                ratio = ratio / <span class="number">10</span>;</div><div class="line">            &#125;</div><div class="line">            image.ratio = ratio;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(groupName);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">spritesOnUpdateRule</span>(<span class="params">isDev, rule, comment, image</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> spriteUrl = image.spriteUrl;</div><div class="line">    image.spriteUrl = <span class="string">'/public/'</span> + spriteUrl;</div><div class="line">    postcssSprites.updateRule(rule, comment, image);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">spritesOnSaveSpritesheet</span>(<span class="params">isDev, opts, groups</span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> file = postcssSprites.makeSpritesheetPath(opts, groups);</div><div class="line">    <span class="keyword">return</span> file;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>我们在sass或者别的style file中使用起来也很简单，只要这样</p>
<p><code>background: url(images/sp/red-sun@2x.png) no-repeat 0 0</code></p>
<p>基本跟我们设置普通背景图没有区别，具体的一些options可以参考<a href="https://github.com/2createStudio/postcss-sprites" target="_blank" rel="external">postcss-sprites</a></p>
<h3 id="SpritesmithPlugin"><a href="#SpritesmithPlugin" class="headerlink" title="SpritesmithPlugin"></a>SpritesmithPlugin</h3><p>当然也有很多人不喜欢后处理的方式(比如我)，我们的webpack其实也可以通过plugin来处理这些图片，特别是我们还可以获得单个图片的高宽，在一些我们需要让图片居中的场景特别合适，废话不多说，直接看栗子！</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> SpritesmithPlugin = <span class="built_in">require</span>(<span class="string">'webpack-spritesmith'</span>);</div><div class="line">plugins: [</div><div class="line">    <span class="keyword">new</span> SpritesmithPlugin(&#123;</div><div class="line">      <span class="attr">src</span>: &#123;</div><div class="line">        <span class="attr">cwd</span>: <span class="string">'./src/assets/sp/'</span>,</div><div class="line">        <span class="attr">glob</span>: <span class="string">'*.png'</span></div><div class="line">      &#125;,</div><div class="line">      <span class="attr">target</span>: &#123;</div><div class="line">        <span class="attr">image</span>: <span class="string">'./src/assets/gen/sprite.png'</span>,</div><div class="line">        <span class="attr">css</span>: <span class="string">'./src/style/mixins/_sprite.scss'</span></div><div class="line">      &#125;,</div><div class="line">      <span class="attr">apiOptions</span>: &#123;</div><div class="line">        <span class="attr">cssImageRef</span>: <span class="string">'../assets/gen/sprite.png'</span></div><div class="line">      &#125;,</div><div class="line">      <span class="attr">spritesmithOptions</span>: &#123;</div><div class="line">        <span class="attr">algorithm</span>: <span class="string">'top-down'</span></div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line">]</div></pre></td></tr></table></figure>
<p>在这个例子里面，我们设置了src的目录，并且只选择png文件。然后我们的target有两个，一个是生成的雪碧图地址，另外一个是生成用来引用文件(这个我们等会解释)，api地址可以写一个src中入口css文件引用的相对地址用来定位，options提供了丰富的配置，这里的top-down就可以生成从上排到下一列的雪碧图用来处理一些需要repeat的情况。</p>
<p>那么我们怎么引用生成的雪碧图呢，我们可以看下target里的css对应的文件:</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">SCSS variables are information about icon's compiled state, stored under its original file name</div><div class="line"></div><div class="line">.icon-home &#123;</div><div class="line">  width: $icon-home-width;</div><div class="line">&#125;</div><div class="line"></div><div class="line">The large array-like variables contain all information about a single icon</div><div class="line">$icon-home: x y offset_x offset_y width height total_width total_height image_path;</div><div class="line"></div><div class="line">At the bottom of this section, we provide information about the spritesheet itself</div><div class="line">$spritesheet: width height image $spritesheet-sprites;</div><div class="line">*/</div><div class="line"><span class="variable">$angle-down-name</span>: <span class="string">'angle-down'</span>;</div><div class="line"><span class="variable">$angle-down-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$angle-down-y</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$angle-down-offset-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$angle-down-offset-y</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$angle-down-width</span>: <span class="number">12px</span>;</div><div class="line"><span class="variable">$angle-down-height</span>: <span class="number">6px</span>;</div><div class="line"><span class="variable">$angle-down-total-width</span>: <span class="number">24px</span>;</div><div class="line"><span class="variable">$angle-down-total-height</span>: <span class="number">179px</span>;</div><div class="line"><span class="variable">$angle-down-image</span>: <span class="string">'../assets/gen/sprite.png'</span>;</div><div class="line"><span class="variable">$angle-down</span>: (<span class="number">0px</span>, <span class="number">0px</span>, <span class="number">0px</span>, <span class="number">0px</span>, <span class="number">12px</span>, <span class="number">6px</span>, <span class="number">24px</span>, <span class="number">179px</span>, <span class="string">'../assets/gen/sprite.png'</span>, <span class="string">'angle-down'</span>, );</div><div class="line"><span class="variable">$angle-up-name</span>: <span class="string">'angle-up'</span>;</div><div class="line"><span class="variable">$angle-up-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$angle-up-y</span>: <span class="number">6px</span>;</div><div class="line"><span class="variable">$angle-up-offset-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$angle-up-offset-y</span>: -<span class="number">6px</span>;</div><div class="line"><span class="variable">$angle-up-width</span>: <span class="number">12px</span>;</div><div class="line"><span class="variable">$angle-up-height</span>: <span class="number">6px</span>;</div><div class="line"><span class="variable">$angle-up-total-width</span>: <span class="number">24px</span>;</div><div class="line"><span class="variable">$angle-up-total-height</span>: <span class="number">179px</span>;</div><div class="line"><span class="variable">$angle-up-image</span>: <span class="string">'../assets/gen/sprite.png'</span>;</div><div class="line"><span class="variable">$angle-up</span>: (<span class="number">0px</span>, <span class="number">6px</span>, <span class="number">0px</span>, -<span class="number">6px</span>, <span class="number">12px</span>, <span class="number">6px</span>, <span class="number">24px</span>, <span class="number">179px</span>, <span class="string">'../assets/gen/sprite.png'</span>, <span class="string">'angle-up'</span>, );</div><div class="line"><span class="variable">$angle-up-green-name</span>: <span class="string">'angle-up-green'</span>;</div><div class="line"><span class="variable">$angle-up-green-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$angle-up-green-y</span>: <span class="number">12px</span>;</div><div class="line"><span class="variable">$angle-up-green-offset-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$angle-up-green-offset-y</span>: -<span class="number">12px</span>;</div><div class="line"><span class="variable">$angle-up-green-width</span>: <span class="number">13px</span>;</div><div class="line"><span class="variable">$angle-up-green-height</span>: <span class="number">7px</span>;</div><div class="line"><span class="variable">$angle-up-green-total-width</span>: <span class="number">24px</span>;</div><div class="line"><span class="variable">$angle-up-green-total-height</span>: <span class="number">179px</span>;</div><div class="line"><span class="variable">$angle-up-green-image</span>: <span class="string">'../assets/gen/sprite.png'</span>;</div><div class="line"><span class="variable">$angle-up-green</span>: (<span class="number">0px</span>, <span class="number">12px</span>, <span class="number">0px</span>, -<span class="number">12px</span>, <span class="number">13px</span>, <span class="number">7px</span>, <span class="number">24px</span>, <span class="number">179px</span>, <span class="string">'../assets/gen/sprite.png'</span>, <span class="string">'angle-up-green'</span>, );</div><div class="line"><span class="variable">$checkbox-checked-name</span>: <span class="string">'checkbox-checked'</span>;</div><div class="line"><span class="variable">$checkbox-checked-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$checkbox-checked-y</span>: <span class="number">19px</span>;</div><div class="line"><span class="variable">$checkbox-checked-offset-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$checkbox-checked-offset-y</span>: -<span class="number">19px</span>;</div><div class="line"><span class="variable">$checkbox-checked-width</span>: <span class="number">20px</span>;</div><div class="line"><span class="variable">$checkbox-checked-height</span>: <span class="number">20px</span>;</div><div class="line"><span class="variable">$checkbox-checked-total-width</span>: <span class="number">24px</span>;</div><div class="line"><span class="variable">$checkbox-checked-total-height</span>: <span class="number">179px</span>;</div><div class="line"><span class="variable">$checkbox-checked-image</span>: <span class="string">'../assets/gen/sprite.png'</span>;</div><div class="line"><span class="variable">$checkbox-checked</span>: (<span class="number">0px</span>, <span class="number">19px</span>, <span class="number">0px</span>, -<span class="number">19px</span>, <span class="number">20px</span>, <span class="number">20px</span>, <span class="number">24px</span>, <span class="number">179px</span>, <span class="string">'../assets/gen/sprite.png'</span>, <span class="string">'checkbox-checked'</span>, );</div><div class="line"><span class="variable">$checkbox-disable-name</span>: <span class="string">'checkbox-disable'</span>;</div><div class="line"><span class="variable">$checkbox-disable-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$checkbox-disable-y</span>: <span class="number">39px</span>;</div><div class="line"><span class="variable">$checkbox-disable-offset-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$checkbox-disable-offset-y</span>: -<span class="number">39px</span>;</div><div class="line"><span class="variable">$checkbox-disable-width</span>: <span class="number">20px</span>;</div><div class="line"><span class="variable">$checkbox-disable-height</span>: <span class="number">20px</span>;</div><div class="line"><span class="variable">$checkbox-disable-total-width</span>: <span class="number">24px</span>;</div><div class="line"><span class="variable">$checkbox-disable-total-height</span>: <span class="number">179px</span>;</div><div class="line"><span class="variable">$checkbox-disable-image</span>: <span class="string">'../assets/gen/sprite.png'</span>;</div><div class="line"><span class="variable">$checkbox-disable</span>: (<span class="number">0px</span>, <span class="number">39px</span>, <span class="number">0px</span>, -<span class="number">39px</span>, <span class="number">20px</span>, <span class="number">20px</span>, <span class="number">24px</span>, <span class="number">179px</span>, <span class="string">'../assets/gen/sprite.png'</span>, <span class="string">'checkbox-disable'</span>, );</div><div class="line"><span class="variable">$star-name</span>: <span class="string">'star'</span>;</div><div class="line"><span class="variable">$star-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$star-y</span>: <span class="number">59px</span>;</div><div class="line"><span class="variable">$star-offset-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$star-offset-y</span>: -<span class="number">59px</span>;</div><div class="line"><span class="variable">$star-width</span>: <span class="number">24px</span>;</div><div class="line"><span class="variable">$star-height</span>: <span class="number">20px</span>;</div><div class="line"><span class="variable">$star-total-width</span>: <span class="number">24px</span>;</div><div class="line"><span class="variable">$star-total-height</span>: <span class="number">179px</span>;</div><div class="line"><span class="variable">$star-image</span>: <span class="string">'../assets/gen/sprite.png'</span>;</div><div class="line"><span class="variable">$star</span>: (<span class="number">0px</span>, <span class="number">59px</span>, <span class="number">0px</span>, -<span class="number">59px</span>, <span class="number">24px</span>, <span class="number">20px</span>, <span class="number">24px</span>, <span class="number">179px</span>, <span class="string">'../assets/gen/sprite.png'</span>, <span class="string">'star'</span>, );</div><div class="line"><span class="variable">$radio-checked-name</span>: <span class="string">'radio-checked'</span>;</div><div class="line"><span class="variable">$radio-checked-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$radio-checked-y</span>: <span class="number">79px</span>;</div><div class="line"><span class="variable">$radio-checked-offset-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$radio-checked-offset-y</span>: -<span class="number">79px</span>;</div><div class="line"><span class="variable">$radio-checked-width</span>: <span class="number">20px</span>;</div><div class="line"><span class="variable">$radio-checked-height</span>: <span class="number">20px</span>;</div><div class="line"><span class="variable">$radio-checked-total-width</span>: <span class="number">24px</span>;</div><div class="line"><span class="variable">$radio-checked-total-height</span>: <span class="number">179px</span>;</div><div class="line"><span class="variable">$radio-checked-image</span>: <span class="string">'../assets/gen/sprite.png'</span>;</div><div class="line"><span class="variable">$radio-checked</span>: (<span class="number">0px</span>, <span class="number">79px</span>, <span class="number">0px</span>, -<span class="number">79px</span>, <span class="number">20px</span>, <span class="number">20px</span>, <span class="number">24px</span>, <span class="number">179px</span>, <span class="string">'../assets/gen/sprite.png'</span>, <span class="string">'radio-checked'</span>, );</div><div class="line"><span class="variable">$radio-disable-name</span>: <span class="string">'radio-disable'</span>;</div><div class="line"><span class="variable">$radio-disable-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$radio-disable-y</span>: <span class="number">99px</span>;</div><div class="line"><span class="variable">$radio-disable-offset-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$radio-disable-offset-y</span>: -<span class="number">99px</span>;</div><div class="line"><span class="variable">$radio-disable-width</span>: <span class="number">20px</span>;</div><div class="line"><span class="variable">$radio-disable-height</span>: <span class="number">20px</span>;</div><div class="line"><span class="variable">$radio-disable-total-width</span>: <span class="number">24px</span>;</div><div class="line"><span class="variable">$radio-disable-total-height</span>: <span class="number">179px</span>;</div><div class="line"><span class="variable">$radio-disable-image</span>: <span class="string">'../assets/gen/sprite.png'</span>;</div><div class="line"><span class="variable">$radio-disable</span>: (<span class="number">0px</span>, <span class="number">99px</span>, <span class="number">0px</span>, -<span class="number">99px</span>, <span class="number">20px</span>, <span class="number">20px</span>, <span class="number">24px</span>, <span class="number">179px</span>, <span class="string">'../assets/gen/sprite.png'</span>, <span class="string">'radio-disable'</span>, );</div><div class="line"><span class="variable">$radio-name</span>: <span class="string">'radio'</span>;</div><div class="line"><span class="variable">$radio-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$radio-y</span>: <span class="number">119px</span>;</div><div class="line"><span class="variable">$radio-offset-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$radio-offset-y</span>: -<span class="number">119px</span>;</div><div class="line"><span class="variable">$radio-width</span>: <span class="number">20px</span>;</div><div class="line"><span class="variable">$radio-height</span>: <span class="number">20px</span>;</div><div class="line"><span class="variable">$radio-total-width</span>: <span class="number">24px</span>;</div><div class="line"><span class="variable">$radio-total-height</span>: <span class="number">179px</span>;</div><div class="line"><span class="variable">$radio-image</span>: <span class="string">'../assets/gen/sprite.png'</span>;</div><div class="line"><span class="variable">$radio</span>: (<span class="number">0px</span>, <span class="number">119px</span>, <span class="number">0px</span>, -<span class="number">119px</span>, <span class="number">20px</span>, <span class="number">20px</span>, <span class="number">24px</span>, <span class="number">179px</span>, <span class="string">'../assets/gen/sprite.png'</span>, <span class="string">'radio'</span>, );</div><div class="line"><span class="variable">$star-solid-name</span>: <span class="string">'star-solid'</span>;</div><div class="line"><span class="variable">$star-solid-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$star-solid-y</span>: <span class="number">139px</span>;</div><div class="line"><span class="variable">$star-solid-offset-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$star-solid-offset-y</span>: -<span class="number">139px</span>;</div><div class="line"><span class="variable">$star-solid-width</span>: <span class="number">24px</span>;</div><div class="line"><span class="variable">$star-solid-height</span>: <span class="number">20px</span>;</div><div class="line"><span class="variable">$star-solid-total-width</span>: <span class="number">24px</span>;</div><div class="line"><span class="variable">$star-solid-total-height</span>: <span class="number">179px</span>;</div><div class="line"><span class="variable">$star-solid-image</span>: <span class="string">'../assets/gen/sprite.png'</span>;</div><div class="line"><span class="variable">$star-solid</span>: (<span class="number">0px</span>, <span class="number">139px</span>, <span class="number">0px</span>, -<span class="number">139px</span>, <span class="number">24px</span>, <span class="number">20px</span>, <span class="number">24px</span>, <span class="number">179px</span>, <span class="string">'../assets/gen/sprite.png'</span>, <span class="string">'star-solid'</span>, );</div><div class="line"><span class="variable">$checkbox-name</span>: <span class="string">'checkbox'</span>;</div><div class="line"><span class="variable">$checkbox-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$checkbox-y</span>: <span class="number">159px</span>;</div><div class="line"><span class="variable">$checkbox-offset-x</span>: <span class="number">0px</span>;</div><div class="line"><span class="variable">$checkbox-offset-y</span>: -<span class="number">159px</span>;</div><div class="line"><span class="variable">$checkbox-width</span>: <span class="number">20px</span>;</div><div class="line"><span class="variable">$checkbox-height</span>: <span class="number">20px</span>;</div><div class="line"><span class="variable">$checkbox-total-width</span>: <span class="number">24px</span>;</div><div class="line"><span class="variable">$checkbox-total-height</span>: <span class="number">179px</span>;</div><div class="line"><span class="variable">$checkbox-image</span>: <span class="string">'../assets/gen/sprite.png'</span>;</div><div class="line"><span class="variable">$checkbox</span>: (<span class="number">0px</span>, <span class="number">159px</span>, <span class="number">0px</span>, -<span class="number">159px</span>, <span class="number">20px</span>, <span class="number">20px</span>, <span class="number">24px</span>, <span class="number">179px</span>, <span class="string">'../assets/gen/sprite.png'</span>, <span class="string">'checkbox'</span>, );</div><div class="line"><span class="variable">$spritesheet-width</span>: <span class="number">24px</span>;</div><div class="line"><span class="variable">$spritesheet-height</span>: <span class="number">179px</span>;</div><div class="line"><span class="variable">$spritesheet-image</span>: <span class="string">'../assets/gen/sprite.png'</span>;</div><div class="line"><span class="variable">$spritesheet-sprites</span>: (<span class="variable">$angle-down</span>, <span class="variable">$angle-up</span>, <span class="variable">$angle-up-green</span>, <span class="variable">$checkbox-checked</span>, <span class="variable">$checkbox-disable</span>, <span class="variable">$star</span>, <span class="variable">$radio-checked</span>, <span class="variable">$radio-disable</span>, <span class="variable">$radio</span>, <span class="variable">$star-solid</span>, <span class="variable">$checkbox</span>, );</div><div class="line"><span class="variable">$spritesheet</span>: (<span class="number">24px</span>, <span class="number">179px</span>, <span class="string">'../assets/gen/sprite.png'</span>, <span class="variable">$spritesheet-sprites</span>, );</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">The provided mixins are intended to be used with the array-like variables</div><div class="line"></div><div class="line">.icon-home &#123;</div><div class="line">  @include sprite-width($icon-home);</div><div class="line">&#125;</div><div class="line"></div><div class="line">.icon-email &#123;</div><div class="line">  @include sprite($icon-email);</div><div class="line">&#125;</div><div class="line"></div><div class="line">Here are example usages in HTML:</div><div class="line"></div><div class="line">`display: block` sprite:</div><div class="line">&lt;div class="icon-home"&gt;&lt;/div&gt;</div><div class="line"></div><div class="line">`display: inline-block` sprite:</div><div class="line">&lt;img class="icon-home" /&gt;</div><div class="line">*/</div><div class="line">@<span class="keyword">mixin</span> sprite-width(<span class="variable">$sprite</span>) &#123;</div><div class="line">  <span class="attribute">width</span>: nth(<span class="variable">$sprite</span>, <span class="number">5</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">@<span class="keyword">mixin</span> sprite-height(<span class="variable">$sprite</span>) &#123;</div><div class="line">  <span class="attribute">height</span>: nth(<span class="variable">$sprite</span>, <span class="number">6</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">@<span class="keyword">mixin</span> sprite-position(<span class="variable">$sprite</span>) &#123;</div><div class="line">  <span class="variable">$sprite-offset-x</span>: nth(<span class="variable">$sprite</span>, <span class="number">3</span>);</div><div class="line">  <span class="variable">$sprite-offset-y</span>: nth(<span class="variable">$sprite</span>, <span class="number">4</span>);</div><div class="line">  <span class="attribute">background-position</span>: <span class="variable">$sprite-offset-x</span>  <span class="variable">$sprite-offset-y</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@<span class="keyword">mixin</span> sprite-image(<span class="variable">$sprite</span>) &#123;</div><div class="line">  <span class="variable">$sprite-image</span>: nth(<span class="variable">$sprite</span>, <span class="number">9</span>);</div><div class="line">  <span class="attribute">background-image</span>: url(#&#123;<span class="variable">$sprite-image</span>&#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">@<span class="keyword">mixin</span> sprite(<span class="variable">$sprite</span>) &#123;</div><div class="line">  @<span class="keyword">include</span> sprite-image(<span class="variable">$sprite</span>);</div><div class="line">  @<span class="keyword">include</span> sprite-position(<span class="variable">$sprite</span>);</div><div class="line">  @<span class="keyword">include</span> sprite-width(<span class="variable">$sprite</span>);</div><div class="line">  @<span class="keyword">include</span> sprite-height(<span class="variable">$sprite</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">The `sprites` mixin generates identical output to the CSS template</div><div class="line">  but can be overridden inside of SCSS</div><div class="line"></div><div class="line">@include sprites($spritesheet-sprites);</div><div class="line">*/</div><div class="line">@<span class="keyword">mixin</span> sprites(<span class="variable">$sprites</span>) &#123;</div><div class="line">  @<span class="keyword">each</span> <span class="variable">$sprite</span> in <span class="variable">$sprites</span> &#123;</div><div class="line">    <span class="variable">$sprite-name</span>: nth(<span class="variable">$sprite</span>, <span class="number">10</span>);</div><div class="line">    .#&#123;<span class="variable">$sprite-name</span>&#125; &#123;</div><div class="line">      @<span class="keyword">include</span> sprite(<span class="variable">$sprite</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这样大家就懂了，它生成了大量的scss(或者其它格式)的变量和mixin，我们就可以通过import这个文件，然后<code>@include sprite($star);</code>这样很方便的去使用。</p>
<p>项目github地址<a href="https://github.com/mixtur/webpack-spritesmith" target="_blank" rel="external">webpack-spritesmith</a></p>
<p>具体的options使用可以参考<a href="https://github.com/Ensighten/spritesmith" target="_blank" rel="external">spritesmith</a></p>

    
  </div>
</article>

</div>


  
      <div class="fexo-comments comments-post">
    
  <section class="disqus-comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </section>

  <script>
    var disqus_shortname = 'forsigner';
    
    var disqus_url = 'http://yoursite.com/2016/03/16/webpack_auto_sprites/';
    
    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>


    




  </div>

  

</body>
</html>
